
<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<title>Attendance</title>
</head>
<body>
<h2>ระบบเช็คชื่อ</h2>
<div id="list"></div>
<button onclick="save()">บันทึก</button>
<script>
const employees = Array.from({length:16},(_,i)=>"พนักงาน "+(i+1));

async function load(){
  const date=new Date().toISOString().split('T')[0];
  const res=await fetch('/api/data');
  const data=await res.json();
  const today=data[date] || employees.map(()=>false);
  let html="";
  employees.forEach((n,i)=>{
    html+=`<div><input type='checkbox' id='c${i}' ${today[i]?"checked":""}> ${n}</div>`;
  });
  document.getElementById('list').innerHTML=html;
}
async function save(){
  const date=new Date().toISOString().split('T')[0];
  const status=employees.map((_,i)=>document.getElementById('c'+i).checked);
  await fetch('/api/save',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({date,status})});
  alert("บันทึกแล้ว");
}
load();
</script>
</body>
</html>
