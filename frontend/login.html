<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <title>ระบบเช็คชื่อพนักงาน</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
        body { font-family: sans-serif; padding: 20px; background: #f5f5f5; }
        .container { max-width: 600px; margin: auto; background: #fff; padding: 20px; border-radius: 10px; }
        h2 { text-align: center; }
        table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        table, th, td { border: 1px solid #ccc; }
        th, td { padding: 10px; text-align: center; }
        button { padding: 10px 15px; margin-top: 10px; cursor: pointer; }
        .admin-box { margin-bottom: 20px; text-align: center; }
        .green { background: #c8f7c5; }
        .red { background: #f7c5c5; }
    </style>
</head>
<body>
<div class="container">

    <h2>ระบบเช็คชื่อพนักงาน</h2>

    <!-- กล่องล็อกอินแอดมิน -->
    <div class="admin-box">
        <input id="adminCode" type="password" placeholder="รหัสแอดมิน" />
        <button onclick="loginAdmin()">เข้าสู่ระบบ</button>
        <p id="adminStatus" style="color: green;"></p>
    </div>

    <!-- ตารางเช็คชื่อ -->
    <table id="attendanceTable">
        <thead>
            <tr>
                <th>ชื่อพนักงาน</th>
                <th>สถานะ</th>
            </tr>
        </thead>
        <tbody>
        </tbody>
    </table>

    <button onclick="saveData()">บันทึกข้อมูล</button>

    <h3>สรุปผลการมาทำงาน</h3>
    <div id="summaryBox"></div>

</div>


<script>
    const employees = [
        "พนักงาน 1","พนักงาน 2","พนักงาน 3","พนักงาน 4",
        "พนักงาน 5","พนักงาน 6","พนักงาน 7","พนักงาน 8",
        "พนักงาน 9","พนักงาน 10","พนักงาน 11","พนักงาน 12",
        "พนักงาน 13","พนักงาน 14","พนักงาน 15","พนักงาน 16",
    ];

    const admins = ["1111","2222","3333","4444","5555","6666"];
    let isAdmin = false;

    function loadTable() {
        const tbody = document.querySelector("#attendanceTable tbody");
        tbody.innerHTML = "";

        let saved = JSON.parse(localStorage.getItem("attendanceData") || "{}");

        employees.forEach((name, index) => {
            const row = document.createElement("tr");

            const status = saved[index] ?? "none";

            row.innerHTML = `
                <td>${name}</td>
                <td>
                    <button onclick="setStatus(${index}, 'มา')" class="${status=='มา'?'green':''}">มา</button>
                    <button onclick="setStatus(${index}, 'ไม่มา')" class="${status=='ไม่มา'?'red':''}">ไม่มา</button>
                </td>
            `;

            tbody.appendChild(row);
        });
    }

    function loginAdmin() {
        const code = document.getElementById("adminCode").value;
        if (admins.includes(code)) {
            isAdmin = true;
            document.getElementById("adminStatus").innerText = "เข้าสู่ระบบสำเร็จ";
        } else {
            alert("รหัสไม่ถูกต้อง");
        }
    }

    function setStatus(index, value) {
        if (!isAdmin) {
            alert("ต้องเป็นแอดมินเท่านั้น!");
            return;
        }

        let saved = JSON.parse(localStorage.getItem("attendanceData") || "{}");
        saved[index] = value;
        localStorage.setItem("attendanceData", JSON.stringify(saved));

        loadTable();
        updateSummary();
    }

    function saveData() {
        alert("บันทึกสำเร็จ");
        updateSummary();
    }

    function updateSummary() {
        let saved = JSON.parse(localStorage.getItem("attendanceData") || "{}");
        let totalCome = Object.values(saved).filter(v => v === "มา").length;
        let totalAbsent = Object.values(saved).filter(v => v === "ไม่มา").length;

        document.getElementById("summaryBox").innerHTML = `
            มาวันนี้: ${totalCome} คน<br>
            ไม่มา: ${totalAbsent} คน
        `;
    }

    loadTable();
    updateSummary();
</script>

</body>
</html>
